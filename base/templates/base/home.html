{% extends 'main.html' %}
{% load static %}
{% block content %}

<div class="content-body">
    <!-- row -->
    <div class="container-fluid">
        <div class="form-head d-flex mb-3 align-items-start">
            <div class="mr-auto d-none d-lg-block">
                <h2 class="text-black font-w600 mb-0">Dashboard</h2>
                {% if user.is_authenticated %}
                <p class="mb-0">Welcome to {{ user.username }}!</p>
                {% else %}
                <h1>Please login 
                {% endif%}
                </h1>
            </div>
            
        </div>
        <div class="row">
            <div class="col-xl-3 col-xxl-3 col-lg-6 col-md-6 col-sm-6">
                <div class="widget-stat card">
                    <div class="card-body p-4">
                        <div class="media ai-icon">
                            <span class="mr-3 bgl-primary text-primary">
                                <!-- <i class="ti-user"></i> -->
                                <i   class="fi fi-rr-book-alt mt-2"></i>
                            </span>
                            <div class="media-body">
                                <h3 class="mb-0 text-black"><span class="counter ml-0">{{ total_menus }}</span></h3>
                                <p class="mb-0">Total Menus</p>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-xxl-3 col-lg-6 col-md-6 col-sm-6">
                <div class="widget-stat card">
                    <div class="card-body p-4">
                        <div class="media ai-icon">
                            <span class="mr-3 bgl-primary text-primary">
                                <i   class="fi fi-rr-calendar mt-2"></i>
                            </span>
                            <div class="media-body">
                                <h3 class="mb-0 text-black"><span class="counter ml-0">{{ total_reservations }}</span></h3>
                                <p class="mb-0">Total Reservations</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-xxl-3 col-lg-6 col-md-6 col-sm-6">
                <div class="widget-stat card">
                    <div class="card-body p-4">
                        <div class="media ai-icon">
                            <span class="mr-3 bgl-primary text-primary">
                                <i class="fi fi-rr-shopping-bag mt-2"></i>

                            </span>
                            <div class="media-body">
                                <h3 class="mb-0 text-black"><span class="counter ml-0">{{total_orders}}</span></h3>
                                <p class="mb-0">Total Orders</p>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-xxl-3 col-lg-6 col-md-6 col-sm-6">
                <div class="widget-stat card">
                    <div class="card-body p-4">
                        <div class="media ai-icon">
                            <span class="mr-3 bgl-primary text-primary">
                                <!-- <i class="ti-user"></i> -->
                                <i   class="fi fi-rr-users"></i>
                            </span>
                            <div class="media-body">
                                <h3 class="mb-0 text-black"><span class="counter ml-0">{{total_customers}}</span></h3>
                                <p class="mb-0">Total Client</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


         </div>
        <div class="row">
            <div class="col-xl-6 col-xxl-6 col-lg-6 col-md-6 col-sm-6">
          
            <div id="container" style="width: 100%;">
                <canvas id="pie-chart"></canvas>
              </div>
              </div>
             
              
                <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
                
<script>
    window.onload = function() {
  var ctx = document.getElementById('pie-chart').getContext('2d');
  window.myPie = new Chart(ctx, config);
};
const config = {
type: 'doughnut',
data: {
datasets: [{
label: 'My First Dataset',
data: {{ data|safe }},
backgroundColor: [
  'rgb(73, 232, 49)',
  'rgb(232, 226, 49)',
  'rgb(255, 205, 86)'
],
hoverOffset: 4
}],
labels: [
'Restaurant',
'Delivery',

],
},
};


</script>


        
            <div class="col-xl-6 col-xxl-6 col-lg-6 col-md-6 col-sm-6">

                <canvas id="myChart" width="100" height="60vh"></canvas>
            </div>
            
<script>
const ctx = document.getElementById('myChart').getContext('2d');
    var df = {{ df|safe }};
const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['May', 'April', 'Mars', ],
        datasets: [{
            label: 'Customer Number',
            data: df,
           
            backgroundColor: [
      'rgba(181, 177, 172)',
      'rgba(181, 177, 172)',
      'rgba(181, 177, 172)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(181, 177, 172)',
      'rgb(181, 177, 172)',
      'rgb(181, 177, 172)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
    borderWidth: 1,
           
            
        }]
    },
    options: {
        scales: {
        y: {
            max: 5,
            min: 0,
            ticks: {
                stepSize: 0.5
            }
        }
    }
    }
    
});
</script>
 
        </div>
        
       

{% endblock content %}
